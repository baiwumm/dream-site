<div align="center">
<img alt="logo" src="./public/logo.svg" width="80"/>
<h2>Dream Site</h2>
<p>ä¸€ä¸ªä»¥æç®€è®¾è®¡å‘ˆç°çš„ç°ä»£åŒ–ä¸ªäººå¯¼èˆªç«™ï¼Œå¸®åŠ©ä½ é«˜æ•ˆè®¿é—®å¸¸ç”¨ç½‘ç«™ä¸ä¼˜è´¨èµ„æºã€‚</p>
</div>

<div align="center">
  <a href="https://vercel.com" target="_blank">
    <img alt="Vercel" src="https://img.shields.io/badge/deployed%20on-Vercel-black?style=flat&logo=vercel">
  </a>
  <a href="https://nextjs.org/" target="_blank">
    <img alt="Next" src="https://img.shields.io/badge/Next-16.0-black?style=flat&logo=Next.js">
  </a>
  <a href="https://supabase.com/" target="_blank">
    <img alt="Supabase" src="https://img.shields.io/badge/Supabase-black?style=flat&logo=Supabase">
  </a>
  <a href="https://tailwindcss.com/" target="_blank">
    <img alt="TaildwindCSS" src="https://img.shields.io/badge/TailwindCSS-black?style=flat&logo=tailwindcss">
  </a>
  <a href="./LICENSE" target="_blank">
    <img alt="LICENSE" src="https://img.shields.io/badge/license-MIT-blue">
  </a>
</div>

## â˜˜ï¸ é¡¹ç›®ç®€ä»‹

`Dream Site` æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ä¸ªäººç«™ç‚¹å¯¼èˆªç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ç¾è§‚ã€é«˜æ•ˆçš„ä¸ªäººç½‘ç«™æ”¶è—ä¸ç®¡ç†ä½“éªŒã€‚æ— è®ºä½ æ˜¯å¼€å‘è€…ã€è®¾è®¡å¸ˆè¿˜æ˜¯å†…å®¹åˆ›ä½œè€…ï¼Œéƒ½å¯ä»¥ç”¨å®ƒæ¥ç»„ç»‡å’Œå±•ç¤ºä½ å–œçˆ±çš„ç½‘ç«™èµ„æºã€‚

## ğŸŒ¿ åœ¨çº¿ä½“éªŒ

â¡ï¸ [ç‚¹å‡»æ‰“å¼€](https://dream.baiwumm.com/)

## ğŸª´ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: [Next 16.0](https://nextjs.org/) (åŸºäº React19.x)
- **UIç»„ä»¶**: [Hero UI](https://www.heroui.com/)
- **æ ·å¼æ–¹æ¡ˆ**: [Tailwind CSS](https://www.tailwindcss.cn/)
- **åç«¯æœåŠ¡**: [Supabase](https://supabase.com/) (å¼€æºFirebaseæ›¿ä»£å“)
- **éƒ¨ç½²å¹³å°**: æ”¯æŒ `Vercel` ç­‰å¤šç§éƒ¨ç½²æ–¹å¼

## âœ¨ ç‰¹æ€§
- ğŸš€ **é«˜æ€§èƒ½**: åŸºäºæœ€æ–°å‰ç«¯æŠ€æœ¯æ ˆï¼Œæé€Ÿå“åº”
- ğŸŒ“ **ä¸»é¢˜åˆ‡æ¢**: å®Œå–„çš„äº®è‰²/æš—é»‘æ¨¡å¼æ”¯æŒ
- ğŸ” **SEOå‹å¥½**: æ”¯æŒSSRæ¸²æŸ“ï¼Œä¼˜åŒ–æœç´¢å¼•æ“æ”¶å½•
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…å„ç§è®¾å¤‡å±å¹•
- ğŸ”’ **å®‰å…¨è®¤è¯**: åŸºäºSupabaseçš„å®Œæ•´ç”¨æˆ·ç³»ç»Ÿ
- ğŸ§© **æ¨¡å—åŒ–æ¶æ„**: æ¸…æ™°çš„ç›®å½•ç»“æ„ï¼Œä¾¿äºäºŒæ¬¡å¼€å‘

## ğŸª´ é¡¹ç›®æˆªå›¾

| äº®è‰²æ¨¡å¼ | æš—è‰²æ¨¡å¼ |
|----------|----------|
| ![äº®è‰²æ¨¡å¼](./public/light.png) | ![æš—è‰²æ¨¡å¼](./public/dark.png) |

| ç½‘ç«™åˆ†ç±» | ç½‘ç«™åˆ—è¡¨ |
|----------|----------|
| ![åˆ†ç±»åˆ—è¡¨](./public/categorys.png) | ![ç«™ç‚¹åˆ—è¡¨](./public/websites.png) |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸŒ³ ç¯å¢ƒè¦æ±‚
- Node.js â‰¥ 18.17 (æ¨èæœ€æ–°LTSç‰ˆæœ¬)
- pnpm (æ¨è) æˆ– npm/yarn

### âš™ï¸ ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env`ï¼Œç¤ºä¾‹ï¼š

```bash
NEXT_PUBLIC_SUPABASE_URL="xxx"
NEXT_PUBLIC_SUPABASE_ANON_KEY="xxx"
NEXT_PUBLIC_SUPABASE_STORAGE_URL="xxx"

# é¡¹ç›®åç§°
NEXT_PUBLIC_APP_NAME = 'Dream Site'
# é¡¹ç›®æè¿°
NEXT_PUBLIC_APP_DESC = 'ä¸€ä¸ªä»¥æç®€è®¾è®¡å‘ˆç°çš„ç°ä»£åŒ–ä¸ªäººå¯¼èˆªç«™ï¼Œå¸®åŠ©ä½ é«˜æ•ˆè®¿é—®å¸¸ç”¨ç½‘ç«™ä¸ä¼˜è´¨èµ„æºã€‚'
# é¡¹ç›®å…³é”®è¯
NEXT_PUBLIC_APP_KEYWORDS = 'Dream Site,æç®€å¯¼èˆª,ç½‘ç«™å¯¼èˆª,ä¸ªäººç«™ç‚¹,ä¹¦ç­¾ç®¡ç†,èµ„æºå¯¼èˆª,Next.js'
# é¡¹ç›®åŸŸå
NEXT_PUBLIC_APP_URL = 'https://dream.baiwumm.com'
# ç‰ˆæƒ
NEXT_PUBLIC_COPYRIGHT = 'ç™½é›¾èŒ«èŒ«ä¸¶'
# ç½‘ç«™ICP
NEXT_PUBLIC_ICP = 'ç²¤ICPå¤‡2023007649å·'
# ç½‘ç«™å…¬ç½‘å¤‡æ¡ˆ
NEXT_PUBLIC_GUAN_ICP = 'ç²¤å…¬ç½‘å®‰å¤‡44030402006402å·'
```

### ğŸ§‘â€ğŸ’» æœ¬åœ°å¼€å‘
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/baiwumm/dream-site.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd dream-site

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### ğŸ“ Supabase é…ç½®
1. è¿›å…¥ [supabase æ§åˆ¶å°](https://supabase.com/dashboard)ï¼Œåˆ›å»ºé¡¹ç›®ï¼Œå¹¶è·å–`NEXT_PUBLIC_SUPABASE_URL`å’Œ`NEXT_PUBLIC_SUPABASE_ANON_KEY`
![Anon Key](./public/1.png)
2. æ‰§è¡Œä»¥ä¸‹ `Sql`ï¼Œç”Ÿæˆé¡¹ç›®éœ€è¦çš„æ•°æ®åº“è¡¨
```sql
-- ç½‘ç«™åˆ†ç±»
create table public.ds_categorys (
  id uuid not null default gen_random_uuid (),
  name text not null,
  created_at timestamp with time zone not null default now(),
  updated_at timestamp with time zone not null default now(),
  user_id uuid null default auth.uid (),
  email text null,
  sort smallint null,
  constraint site_category_pkey primary key (id),
  constraint site_category_name_key unique (name)
) TABLESPACE pg_default;

create trigger trg_ds_categorys_insert BEFORE INSERT on ds_categorys for EACH row
execute FUNCTION handle_ds_categorys_insert ();

create trigger trg_ds_categorys_update BEFORE
update on ds_categorys for EACH row
execute FUNCTION handle_ds_categorys_update ();

-- ç½‘ç«™åˆ—è¡¨
create table public.ds_websites (
  id uuid not null default gen_random_uuid (),
  created_at timestamp with time zone not null default now(),
  user_id uuid null default auth.uid (),
  email text null default 'NULL'::text,
  name text null,
  "desc" text null,
  logo text null,
  tags text[] null,
  sort smallint null,
  updated_at timestamp with time zone null default now(),
  url text null,
  pinned boolean null default false,
  vpn boolean null default false,
  category_id uuid null default gen_random_uuid (),
  recommend boolean null default false,
  "visitCount" integer null default 0,
  "commonlyUsed" boolean null default false,
  "logoAccent" text null,
  constraint websites_pkey primary key (id),
  constraint ds_websites_name_key unique (name),
  constraint ds_websites_category_id_fkey foreign KEY (category_id) references ds_categorys (id)
) TABLESPACE pg_default;

create index IF not exists idx_ds_websites_id on public.ds_websites using btree (id) TABLESPACE pg_default;

create trigger trg_ds_websites_insert BEFORE INSERT on ds_websites for EACH row
execute FUNCTION handle_ds_websites_insert ();

create trigger trg_ds_websites_update BEFORE
update on ds_websites for EACH row
execute FUNCTION handle_ds_websites_update ();
```
3. æ‰§è¡Œä»¥ä¸‹ `Sql`ï¼Œç”Ÿæˆ `visitCount` è®¿é—®ç»Ÿè®¡å‡½æ•°ï¼š
```sql
SELECT pg_get_functiondef(oid) as function_definition
FROM pg_proc 
WHERE proname = 'increment_visit_count';

drop function if exists increment_visit_count(uuid);

create or replace function increment_visit_count(row_id uuid)
returns bigint
language plpgsql
security definer
as $$
declare
  new_count bigint;
begin
  update public.ds_websites
  set "visitCount" = coalesce("visitCount", 0) + floor(random() * 10 + 1)
  where id = row_id
  returning "visitCount" into new_count;

  if new_count is null then
    raise exception 'update blocked or row not found, id=%', row_id;
  end if;

  return new_count;
end;
$$;

grant execute on function increment_visit_count(uuid)
to anon, authenticated;
```
4. æ‰§è¡Œä»¥ä¸‹ `Sql`ï¼Œç”¨äº `Insert` å’Œ `Update` è§¦å‘å™¨ï¼Œè‡ªåŠ¨æ›´æ–°åˆ—ï¼š
```sql
-- ds_categorys
-- =====================================================
-- 1. INSERTï¼šè‡ªåŠ¨å†™å…¥ user_id / email / created_at / updated_at
-- =====================================================
create or replace function public.handle_ds_categorys_insert()
returns trigger
language plpgsql
security definer
as $$
begin
  -- å½“å‰ç™»å½•ç”¨æˆ· ID
  new.user_id := auth.uid();

  -- ä» JWT ä¸­è¯»å– email
  new.email := auth.jwt() ->> 'email';

  -- æ—¶é—´å…œåº•
  new.created_at := now();
  new.updated_at := now();

  return new;
end;
$$;


drop trigger if exists trg_ds_categorys_insert on public.ds_categorys;

create trigger trg_ds_categorys_insert
before insert on public.ds_categorys
for each row
execute function public.handle_ds_categorys_insert();


-- =====================================================
-- 2. UPDATEï¼šè‡ªåŠ¨æ›´æ–° updated_at / user_id / email
-- =====================================================
create or replace function public.handle_ds_categorys_update()
returns trigger
language plpgsql
security definer
as $$
begin
  -- æ›´æ–°æ—¶é—´
  new.updated_at := now();

  return new;
end;
$$;


drop trigger if exists trg_ds_categorys_update on public.ds_categorys;

create trigger trg_ds_categorys_update
before update on public.ds_categorys
for each row
execute function public.handle_ds_categorys_update();


-- ds_websites
-- =====================================================
-- 1. INSERTï¼šè‡ªåŠ¨å†™å…¥ user_id / email / created_at / updated_at
-- =====================================================
create or replace function public.handle_ds_websites_insert()
returns trigger
language plpgsql
security definer
as $$
begin
  -- å½“å‰ç™»å½•ç”¨æˆ· ID
  new.user_id := auth.uid();

  -- ä» JWT ä¸­è¯»å– email
  new.email := auth.jwt() ->> 'email';

  -- æ—¶é—´å…œåº•
  new.created_at := now();
  new.updated_at := now();

  return new;
end;
$$;



drop trigger if exists trg_ds_websites_insert on public.ds_websites;

create trigger trg_ds_websites_insert
before insert on public.ds_websites
for each row
execute function public.handle_ds_websites_insert();



-- =====================================================
-- 2. UPDATEï¼šè‡ªåŠ¨æ›´æ–° updated_at / user_id / email
-- =====================================================
create or replace function public.handle_ds_websites_update()
returns trigger
language plpgsql
security definer
as $$
begin
  -- æ›´æ–°æ—¶é—´
  new.updated_at := now();

  return new;
end;
$$;



drop trigger if exists trg_ds_websites_update on public.ds_websites;

create trigger trg_ds_websites_update
before update on public.ds_websites
for each row
execute function public.handle_ds_websites_update();

```
5. è¿›å…¥ [Authentication](https://supabase.com/dashboard/project/athbiwlqrieaoetfapxd/auth/users) ï¼Œè‡ªè¡Œé…ç½®  [Policies](https://supabase.com/dashboard/project/athbiwlqrieaoetfapxd/auth/policies)  å’Œ [Sign In / Providers](https://supabase.com/dashboard/project/athbiwlqrieaoetfapxd/auth/providers)
![Authentication](./public/2.png)
6. è¿›å…¥ [Storage](https://supabase.com/dashboard/project/athbiwlqrieaoetfapxd/storage/files)ï¼Œåˆ›å»ºä¿å­˜ç½‘ç«™å›¾æ ‡çš„å­˜å‚¨æ¡¶
![Storage](./public/3.png)

## âš™ï¸ Vercel ä¸€é”®éƒ¨ç½²
1. `Fork` æœ¬é¡¹ç›®ï¼Œåœ¨ `Vercel` å®˜ç½‘ç‚¹å‡» `New Project`
2. ç‚¹å‡» `Import Git Repository` å¹¶é€‰æ‹©ä½  fork çš„æ­¤é¡¹ç›®å¹¶ç‚¹å‡» `import`
3. `PROJECT NAME`è‡ªå·±å¡«ï¼Œ`FRAMEWORK PRESET` é€‰ `Other` ç„¶åç›´æ¥ç‚¹ `Deploy` æ¥ç€ç­‰éƒ¨ç½²å®Œæˆå³å¯

<a href="https://vercel.com/dashboard" target="_blank">
<img alt="vercel éƒ¨ç½²" src="./public/vercel.svg" />
</a>

## ğŸ“œ è®¸å¯è¯
æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚

## â­ Star History

[![Star History Chart](https://api.star-history.com/svg?repos=baiwumm/dream-site&type=Date)](https://star-history.com/#baiwumm/dream-site&Date)